#!/bin/bash
set -e
PROJECT_NAME="djp-sound"
DOMAIN="djpsound.com"
VERCEL_TEAM_ID="team_XXXX"  # remplace par ton scope/equipe Vercel
GIT_REPO="https://github.com/your-account/djp-sound.git"

echo "ğŸš€ Clonage..."
rm -rf $PROJECT_NAME || true
git clone $GIT_REPO $PROJECT_NAME || true
cd $PROJECT_NAME || exit 1

echo "ğŸ“¦ Installation des dÃ©pendances..."
npm ci || npm install

echo "ğŸ”§ Variables d'environnement (modÃ¨le)"
cp .env.production.sample .env.production || true
echo "Veuillez modifier .env.production pour ajouter votre OPENAI_API_KEY avant le dÃ©ploiement."

echo "ğŸ—ï¸ Build..."
npm run build || true

echo "ğŸš€ DÃ©ploiement (npx vercel)"
npx vercel --prod --yes --scope $VERCEL_TEAM_ID || true

echo "ğŸŒ Domaine (alias)"
npx vercel domains add $DOMAIN || true
npx vercel alias set $PROJECT_NAME.vercel.app $DOMAIN || true

echo "âœ… DÃ©ploiement script terminÃ©."
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
